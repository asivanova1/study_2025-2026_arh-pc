---
## Author
author:
  name: Иванова Анастасия Сергеевна
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: 1132250427@rudn.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "Отчёт по лабораторной работе №6"
license: "CC BY"
---

## Цель работы
Освоить арифметические инструкции языка ассемблера NASM.

## Порядок выполнения лабораторной работы
1. Создадим каталог для программ лабораторной работы № 6, перейдем в него и создадим файл lab6-1.asm [рис. @fig-001]:

![Создание каталога и файла](image/1.png){#fig-001 width=70%}

2. Рассмотрим пример программ вывода символьных и численных значений. Программы будут выводить значения записанные в регистр eax. Введем в файл lab6-1.asm текст программы [рис. @fig-002]:

![Ввод программы](image/2.png){#fig-002 width=70%}

Создадим исполняемый файл и запустим его [рис. @fig-003]:

![Проверка работы программы](image/3.png){#fig-003 width=70%}

В данном случае при выводе значения регистра eax мы ожидаем увидеть число 10. Однако результатом является символ j. Команда add eax,ebx записывает в регистр eax сумму кодов – 01101010 (106), что в свою очередь является кодом символа j. 
3. Далее изменим текст программы и вместо символов, запишем в регистры числа. Исправим текст программы [рис. @fig-004]:

![Изменение программы](image/4.png){#fig-004 width=70%}

Создадим исполняемый файл и запустим его [рис. @fig-005]:

![Проверка работы программы](image/5.png){#fig-005 width=70%}

Как и в предыдущем случае при исполнении программы мы не получим число 10. В данном случае должен выводится символ с кодом 10, но он не отобразился.
4. Для работы с числами в файле in_out.asm реализованы подпрограммы для преобразования ASCII символов в числа и обратно. Создадим файл lab6-2.asm в каталоге ~/work/arch-pc/lab06 и введем в него текст программы [рис. @fig-006]:

![Создание файла](image/6.png){#fig-006 width=70%}

[рис. @fig-007]

![Ввод программы](image/7.png){#fig-007 width=70%}

Создадим исполняемый файл и запустим его [рис. @fig-008]:

![Проверка работы программы](image/8.png){#fig-008 width=70%}

В результате работы программы мы получаем число 106.
5. Аналогично предыдущему примеру изменим символы на числа. Заменим строки [рис. @fig-009]:

![Изменение программы](image/9.png){#fig-009 width=70%}

Создадим исполняемый файл и запустим его [рис. @fig-010]:

![Проверка работы программы](image/10.png){#fig-010 width=70%}

В результате работы программы мы получаем число 10.
Заменим функцию iprintLF на iprint. Создадим исполняемый файл и запустим его [рис. @fig-011]:

![Изменение программы](image/11.png){#fig-011 width=70%}

[рис. @fig-012]

![Запуск программы](image/12.png){#fig-012 width=70%}

После замены функции число 10 выводится без переноса (не на отдельной строчке).
6. В качестве примера выполнения арифметических операций в NASM приведем программу вычисления арифметического выражения f(x) = (5 ∗ 2 + 3)/3. Создадим файл lab6-3.asm в каталоге ~/work/arch-pc/lab06 и напишем в нем программу [рис. @fig-013]:

![Создание файла](image/13.png){#fig-013 width=70%}

[рис. @fig-014]:

![Ввод программы](image/14.png){#fig-014 width=70%}

Создадим исполняемый файл и запустим его [рис. @fig-015]:

![Проверка работы программы](image/15.png){#fig-015 width=70%}

Программа выводит результат - 4 и остаток от деления - 1.
Изменим текст программы для вычисления выражения f(x) = (4 ∗ 6 + 2)/5 [рис. @fig-016]:

![Изменение программы](image/16.png){#fig-016 width=70%}

Создадим исполняемый файл и проверим его работу [рис. @fig-017]:

![Проверка работы программы](image/17.png){#fig-017 width=70%}

Программа выводит результат - 5 и остаток от деления - 1.
7. В качестве другого примера рассмотрим программу вычисления варианта задания по номеру студенческого билета, работающую по следующему алгоритму:
• вывести запрос на введение № студенческого билета
• вычислить номер варианта по формуле: (Sn mod 20) + 1, где Sn – номер студенческого билета (В данном случае a mod b – это остаток от деления a на b).
• вывести на экран номер варианта.
Создадим файл variant.asm в каталоге ~/work/arch-pc/lab06 и напишем в нем программу [рис. @fig-018]:

![Создание файла](image/18.png){#fig-018 width=70%}

[рис. @fig-019]

![Ввод программы](image/19.png){#fig-019 width=70%}

Создадим исполняемый файл и запустим его [рис. @fig-020]:

![Проверка работы программы](image/20.png){#fig-020 width=70%}

Результатом работы является ответ - 8 вариант.
8. Ответы на следующие вопросы:
1. Какие строки листинга 6.4 отвечают за вывод на экран сообщения ‘Ваш вариант:’?: 
mov eax,rem
call sprint
2. Для чего используется следующие инструкции?
mov ecx, x - загрузка адреса буфера х в ECX
mov edx, 80 - загрузка размера буфера EDX
call sread - вызов функции чтения строки с клавиатуры
3. Для чего используется инструкция “call atoi”? - преобразование строки в число.
4. Какие строки листинга 6.4 отвечают за вычисления варианта?:
xor edx,edx    
mov ebx,20     
div ebx        
inc edx       
5. В какой регистр записывается остаток от деления при выполнении инструкции “div ebx”? - в регистр EDX.
6. Для чего используется инструкция “inc edx”? - увеличение значения в регистре на 1.
7. Какие строки листинга 6.4 отвечают за вывод на экран результата вычислений?:
mov eax,rem    
call sprint    
mov eax,edx    
call iprintLF  

## Выполнение заданий для самостоятельной работы
1. Напишем программу для вычисления выражения y = (11 + x) * 2 - 6 [рис. @fig-021]:

![ВСоздание файла](image/21.png){#fig-021 width=70%}

[рис. @fig-022]:

![Ввод программы](image/22.png){#fig-022 width=70%}

2. Создадим исполняемый файл и проверим его работу для значений x1 = 1 и x2 = 9 [рис. @fig-023]:

![Проверка работы программы](image/23.png){#fig-023 width=70%}

## Вывод
Мы освоили арифметические инструкции языка ассемблера NASM.

::: {#refs}
:::
