---
## Author
author:
  name: Иванова Анастасия Сергеевна
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: 1132250427@rudn.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "Отчет по лабораторной работе №7"
license: "CC BY"
---

# Цель работы

Изучить команды условного и безусловного перехода. Приобрести навыки написания программ с использованием переходов. Познакомство с назначением и структурой файла листинга.

# Выполнение лабораторной работы

1. Создадим каталог для программам лабораторной работы № 7, перейдем в него и создадим файл lab7-1.asm [рис. @fig-001]:

![Создание каталога и файла](image/1.png){#fig-001 width=70%}

2. Инструкция jmp в NASM используется для реализации безусловных переходов. Рассмотрим пример программы с использованием инструкции jmp. Введем в файл lab7-1.asm текст программы [рис. @fig-002]:

![Ввод программы](image/2.png){#fig-002 width=70%}

Создайте исполняемый файл и запустите его [рис. @fig-003]:

![Проверка работы программы](image/3.png){#fig-003 width=70%}

Таким образом, использование инструкции jmp _label2 меняет порядок исполнения
инструкций и позволяет выполнить инструкции начиная с метки _label2, пропустив вывод первого сообщения.

Инструкция jmp позволяет осуществлять переходы не только вперед но и назад. Изменим программу таким образом, чтобы она выводила сначала ‘Сообщение № 2’, потом ‘Сообщение № 1’ и завершала работу. Изменим текст программы [рис. @fig-005]:

![Изменение программы](image/5.png){#fig-005 width=70%}

Создадим исполняемый файл и проверим его работу [рис. @fig-006]:

![Проверка работы программы](image/6.png){#fig-006 width=70%}

Изменим текст программы, добавив jmp, чтобы вывод программы был следующим:
user@dk4n31:~$ ./lab7-1
Сообщение № 3
Сообщение № 2
Сообщение № 1
user@dk4n31:~$

[рис. @fig-007]:

![Изменение программы](image/7.png){#fig-007 width=70%}

[рис. @fig-008]:

![Изменение программы](image/8.png){#fig-008 width=70%}

[рис. @fig-009]:

![Проверка работы программы](image/9.png){#fig-009 width=70%}

3. Использование инструкции jmp приводит к переходу в любом случае. Однако, часто при
написании программ необходимо использовать условные переходы, т.е. переход дол-
жен происходить если выполнено какое-либо условие. В качестве примера рассмотрим
программу, которая определяет и выводит на экран наибольшую из 3 целочисленных
переменных: A,B и C. Значения для A и C задаются в программе, значение B вводиться с
клавиатуры. Создадим файл lab7-2.asm в каталоге ~/work/arch-pc/lab07. Внимательно изучим текст программы и введем в lab7-2.asm [рис. @fig-011]

![Ввод программы](image/11.png){#fig-011 width=70%}

Создадим исполняемый файл и проверим его работу для разных значений B [рис. @fig-010]:

![Проверка работы программы](image/10.png){#fig-010 width=70%}

Данную программу можно упростить и сравнивать все 3 переменные как символы (т.е. не
использовать функцию atoi). Однако если переменные преобразовать из символов числа,
над ними можно корректно проводить арифметические операции.

4. Обычно nasm создаёт в результате ассемблирования только объектный файл. Получить
файл листинга можно, указав ключ -l и задав имя файла листинга в командной строке.
Откроем файл с программой lab7-2.asm и в инструкции с двумя операндами
удалим один операнд. Выполним трансляцию с получением файла листинга [рис. @fig-011]:

![Просмотр содержимого файла](image/11.png){#fig-011 width=70%}

Объяснение строк:
Первое значение в файле листинга - номер строки, и он может вовсе не совпа-
дать с номером строки изначального файла. Второе вхождение - адрес, смещение
машинного кода относительно начала текущего сегмента, затем непосредствен-
но идет сам машинный код, а заключает строку исходный текст прогарммы с
комментариями.

# Задание для самостоятельной работы

1. Напишем программу нахождения наименьшей из 3 целочисленных переменных a,b и .
Значения переменных выбрем из табл. 7.5 в соответствии с вариантом, полученным
при выполнении лабораторной работы № 7. Создадим исполняемый файл и проверим
его работу:

[рис. @fig-012]:

![Выполнение задания](image/12.png){#fig-012 width=70%}

[рис. @fig-013]:

![Выполнение задания](image/13.png){#fig-013 width=70%}

2. Напишем программу, которая для введенных с клавиатуры значений x и a вычисляет
значение заданной функции f(x) и выводит результат вычислений. Вид функции f(x)
выбрем из таблицы 7.6 вариантов заданий в соответствии с вариантом, полученным
при выполнении лабораторной работы № 7. Создадим исполняемый файл и проверим
его работу для значений x и a из 7.6:

[рис. @fig-014]:

![Выполнение задания](image/14.png){#fig-014 width=70%}

[рис. @fig-015]:

![Выполнение задания](image/15.png){#fig-015 width=70%}

[рис. @fig-016]:

![Выполнение задания](image/16.png){#fig-016 width=70%}

[рис. @fig-017]:

![Выполнение задания](image/17.png){#fig-017 width=70%}

# Вывод

Мы изучили команды условного и безусловного перехода. Приобрели навыки написания программ с использованием переходов. Познакомились с назначением и структурой файла листинга.

# Список литературы{.unnumbered}

::: {#refs}
:::
